# quine.etk
# ⬜ => ⬜
# A quine is a computer program which takes no input and produces a copy of its own source code as its only output.
# python: a='a=%r;print(a%%a)';print(a%a)

# 0x80...f3 is the compiled code excluding the push16 instruction (from dup1 to return)
push16 0x8060801b17606f5953600152602136f3

# --- stack ---
dup1                # [0x8060801b17606f5953600152602136f3 0x8060801b17606f5953600152602136f3]
push1 128           # [128 0x8060801b17606f5953600152602136f3 0x8060801b17606f5953600152602136f3]
shl                 # [0x8060801b17606f5953600152602136f300000000000000000000000000000000 0x8060801b17606f5953600152602136f3]
or                  # [0x8060801b17606f5953600152602136f38060801b17606f5953600152602136f3]

# (6f is push16)
push1 0x6f          # [6f 0x8060801b17606f5953600152602136f38060801b17606f5953600152602136f3]
msize               # [0 6f 0x8060801b17606f5953600152602136f38060801b17606f5953600152602136f3]
mstore8             # [0x8060801b17606f5953600152602136f38060801b17606f5953600152602136f3]
# mem = [6f]

push1 1             # [1 0x8060801b17606f5953600152602136f38060801b17606f5953600152602136f3]
mstore              # []
# mem = [6f8060801b17606f5953600152602136f38060801b17606f5953600152602136f3]

push1 33            # [33]
calldatasize        # [0 33]
# (by definition, a quine takes no input so calldatasize is 0)
return              # out = [6f8060801b17606f5953600152602136f38060801b17606f5953600152602136f3]

# $ eas quine.etk
# 6f8060801b17606f5953600152602136f38060801b17606f5953600152602136f3
#
# $ evm --code $(eas quine.etk) run | cut -dx -f2
# 6f8060801b17606f5953600152602136f38060801b17606f5953600152602136f3

0x8060801b17606f5953600152602136f3
80: dup1 克隆栈顶元素
60 80: push1 80 入栈1byte
1b: shl [shift|value] 左移
17: or
60 6f:
59
53
60 01
52
60 21
36
f3

